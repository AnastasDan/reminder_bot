# Бот напоминания через WhatsApp

Этот проект представляет собой бота для отправки и управления напоминаниями через WhatsApp. Пользователи могут добавлять, просматривать и удалять напоминания.

Чтобы получить **приветственное** сообщение, просто введите любое слово. 
Обратите внимание, что все временные указания для напоминаний основаны на **московском времени**.

## Стек технологий

- **Python**: Язык программирования, на котором написан бекенд приложения.
- **FastAPI**: Современный, быстрый (высокопроизводительный) веб-фреймворк для построения API.
- **SQLAlchemy**: SQL Toolkit и Object-Relational Mapping (ORM) для Python, используется для взаимодействия с базой данных.
- **PostgreSQL**: Система управления базами данных.
- **Docker**: Платформа для разработки, доставки и запуска приложений в контейнерах.
- **Twilio API**: Облачный сервис, который позволяет создать бота WhatsApp.
- **APScheduler**: Планировщик заданий для Python, который позволяет запланировать выполнение кода в определенное время.

## Как запустить проект

1. Клонируем себе репозиторий:

```bash 
git clone git@github.com:AnastasDan/reminder_bot.git
```

2. Переходим в директорию reminder_bot/, создаем файл .env и заполняем его. Список данных указан в файле .env.example.

3. Запускаем проект:

```bash
docker compose -f docker-compose.yml up
```

4. Создаем таблицы в БД:

```bash
docker compose -f docker-compose.yml exec web python create_db.py
```

## Настройка WhatsApp Sandbox в Twilio

Для того, чтобы ваше приложение могло отправлять и принимать сообщения через WhatsApp с использованием Twilio Sandbox, необходимо настроить URL вебхука в личном кабинете Twilio.

### Шаги для настройки вебхука:

1. Перейдите на [Twilio Console](https://www.twilio.com/console) и войдите в свой аккаунт.

2. Перейдите в раздел **Sandbox**.

3. На странице Sandbox вы увидите поле для настройки **WHEN A MESSAGE COMES IN (Когда приходит сообщение)**. В это поле необходимо вставить URL вашего вебхука, который обрабатывает входящие сообщения и статусы сообщений соответственно.

    Пример URL вебхука:
    ```
    https://your-ngrok-url/webhooks/whatsapp/
    ```
    Замените `your-ngrok-url` на адрес, который вы получили при запуске ngrok (или на URL вашего сервера, если вы используете постоянный домен).

4. После добавления URL нажмите на кнопку **Save** (Сохранить), чтобы применить изменения.

Теперь ваше приложение настроено на прием и отправку сообщений через WhatsApp с использованием Twilio Sandbox.

## Функционал бота

### 1. Добавление напоминания

Пользователи могут добавлять новые напоминания, указывая время и текст напоминания.
Пример команды: **Добавь 12:30 01.04.2024 Не забыть купить подарок**

### 2.  Просмотр актуальных напоминаний

Пользователи могут просматривать список всех актуальных напоминаний, которые должны произойти в будущем.
Пример команды: **Покажи**

### 3. Удаление напоминания

Пользователи могут удалять существующие напоминания по их времени и тексту.
Пример команды: **Удали 12:30 01.04.2024 Не забыть купить подарок**

## Автор проекта

[Anastas Danielian](https://github.com/AnastasDan)